<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BA (Hons) Fashion Program Timeline</title>
  <style>
    /* Base styles following Design School Canvas Template */
    *, *::before, *::after {
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      line-height: 1.5;
      color: #333;
      margin: 0;
      padding: 0;
      background-color: #f8f9fa;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .timeline-container {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      padding: 30px;
      margin-bottom: 30px;
    }
    
    h1 {
      font-size: 1.75rem;
      text-align: center;
      margin-bottom: 1.5rem;
    }
    
    p {
      margin-bottom: 1rem;
    }
    
    .text-center {
      text-align: center;
    }
    
    /* Year tabs */
    .year-tabs {
      display: flex;
      margin-bottom: 1.5rem;
      border-bottom: 1px solid #dee2e6;
    }
    
    .year-tab {
      flex: 1;
      padding: 0.75rem;
      font-weight: 600;
      text-align: center;
      border: 2px solid #dee2e6;
      background-color: white;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    
    .year-tab:hover:not(.active) {
      background-color: #f1f1f1;
    }
    
    .year-tab.active {
      background-color: #e9ecef;
      border-color: #adb5bd;
    }
    
    /* Year sections */
    .year-section {
      display: none;
    }
    
    .year-section.active {
      display: block;
    }
    
    .year-title {
      font-size: 1.25rem;
      font-weight: bold;
      margin-bottom: 0.5rem;
    }
    
    /* Legend */
    .legend {
      display: flex;
      flex-wrap: wrap;
      gap: 1.5rem;
      margin-bottom: 1.5rem;
      font-size: 0.875rem;
    }
    
    .legend-item {
      display: flex;
      align-items: center;
    }
    
    .legend-color {
      width: 1rem;
      height: 1rem;
      margin-right: 0.5rem;
      border: 1px solid;
    }
    
    .project-color {
      background-color: #e9ecef;
      border-color: #adb5bd;
    }
    
    .formative-color {
      background-color: #FFED00;
      border-color: #d97706;
    }
    
    .summative-color {
      background-color: #ef4444;
      border-color: #b91c1c;
    }
    
    .break-color {
      background-color: #f1f5f9;
      border-color: #cbd5e1;
    }
    
    /* Modal popup */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }
    
    .modal-content {
      background-color: white;
      padding: 1.5rem;
      border-radius: 0.5rem;
      max-width: 500px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    .modal-content.formative {
      border-top: 5px solid #FFED00;
    }
    
    .modal-content.summative {
      border-top: 5px solid #ef4444;
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }
    
    .modal-title {
      font-weight: bold;
      font-size: 1.25rem;
      margin: 0;
    }
    
    .close-button {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: #6b7280;
      line-height: 1;
    }
    
    .resource-link {
      display: inline-block;
      margin-top: 1rem;
      background-color: #2563eb;
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 0.25rem;
      text-decoration: none;
      font-weight: 500;
    }
    
    .resource-link:hover {
      background-color: #1d4ed8;
    }
    
    /* Timeline visualization */
    .timeline-visualization {
      border: 1px solid #dee2e6;
      border-radius: 0.5rem;
      padding: 1rem;
      background-color: #f8f9fa;
      position: relative;
      overflow-x: auto;
    }
    
    .teaching-blocks {
      position: relative;
      height: 2rem;
      margin-bottom: 1rem;
      display: flex;
    }
    
    .block-label {
      flex: 1;
      height: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #fffbeb;
      border: 1px solid #fef3c7;
      font-size: 0.875rem;
    }
    
    .week-markers {
      position: relative;
      height: 2rem;
      margin-bottom: 1.5rem;
      border-bottom: 1px solid #e5e7eb;
    }
    
    .week-marker {
      position: absolute;
      height: 100%;
    }
    
    .week-marker-line {
      height: 100%;
      border-left: 1px solid #d1d5db;
    }
    
    .week-marker-label {
      font-size: 0.75rem;
      color: #6b7280;
      margin-top: 0.25rem;
    }
    
    .timeline-content {
      position: relative;
      min-height: 300px;
    }
    
    .vertical-columns {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 0;
    }
    
    .vertical-column {
      position: absolute;
      top: 0;
      height: 100%;
      background-color: #f1f5f9;
      opacity: 0.7;
      z-index: 0;
    }
    
    .timeline-items {
      position: relative;
      z-index: 1;
    }
    
    .timeline-row {
      position: relative;
      margin-bottom: 1rem;
      height: 2.5rem;
    }
    
    .timeline-item {
      position: absolute;
      height: 2rem;
      border-radius: 0.25rem;
      border: 1px solid;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      overflow: hidden;
      font-size: 0.875rem;
      z-index: 1;
    }
    
    .timeline-item.project {
      background-color: #e9ecef;
      border-color: #adb5bd;
    }
    
    .timeline-item.formative {
      background-color: #FFED00;
      border-color: #d97706;
      height: 1.5rem;
      width: 1.5rem !important;
      border-radius: 50%;
      z-index: 2;
      justify-content: center;
      margin-left: -0.75rem;
      cursor: pointer;
    }
    
    .timeline-item.summative {
      background-color: #ef4444;
      border-color: #b91c1c;
      color: white;
      height: 1.5rem;
      width: 1.5rem !important;
      border-radius: 50%;
      z-index: 2;
      justify-content: center;
      margin-left: -0.75rem;
      cursor: pointer;
    }
    
    .timeline-item.break {
      background-color: transparent;
      border: none;
    }
    
    .item-label {
      padding: 0 0.5rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .milestone-label {
      position: absolute;
      top: -1.5rem;
      font-size: 0.75rem;
      white-space: nowrap;
    }
    
    /* Quote */
    blockquote {
      margin: 1.5rem 0;
      padding: 1rem;
      border-left: 4px solid #FFED00;
      background-color: #f8f9fa;
      font-style: italic;
    }
    
    blockquote p:last-child {
      margin-bottom: 0;
    }
    
    .quote-attribution {
      margin-top: 0.5rem;
      font-size: 0.875rem;
      font-style: normal;
    }
    
    /* Back button */
    .back-button {
      display: block;
      margin: 2rem auto 1rem;
      padding: 0.75rem 1.5rem;
      background-color: #FFED00;
      color: #000;
      border: 2px solid #000;
      border-radius: 0.25rem;
      font-weight: bold;
      cursor: pointer;
      text-decoration: none;
      text-align: center;
      max-width: 300px;
    }
    
    .back-button:hover {
      background-color: #e6d500;
    }
    
    /* Footer */
    .footer {
      text-align: center;
      margin-top: 1.5rem;
      color: #6b7280;
      font-size: 0.875rem;
    }
    
    /* Mobile responsiveness */
    @media (max-width: 768px) {
      .container {
        padding: 10px;
      }
      
      .timeline-container {
        padding: 15px;
      }
      
      .year-tabs {
        flex-direction: column;
      }
      
      .year-tab {
        margin-bottom: 0.5rem;
      }
      
      .legend {
        flex-direction: column;
        gap: 0.5rem;
      }
      
      .modal-content {
        width: 95%;
        padding: 1rem;
      }
      
      .timeline-visualization {
        padding: 0.5rem;
      }
      
      .timeline-row {
        margin-bottom: 2rem;
      }
      
      .milestone-label {
        top: -2.5rem;
        left: 0 !important;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="timeline-container">
      <h1>BA (Hons) Fashion Program Feedback and Assessment Timeline</h1>
      
      <div class="text-center">
        <p>This timeline visualizes your feedback and assessment journey over the duration of the BA (Hons) Fashion Program.</p>
        <p>It demonstrates how assessment weighting contributes to your final degree classification.</p>
      </div>
      
      <!-- Year tabs -->
      <div class="year-tabs">
        <button class="year-tab active" id="tab-year1">Year 1: Non-weighted</button>
        <button class="year-tab" id="tab-year2">Year 2: 20% weighted</button>
        <button class="year-tab" id="tab-year3">Year 3: 80% weighted</button>
      </div>
      
      <!-- Year sections -->
      <div id="section-year1" class="year-section active">
        <h2 class="year-title">Year 1: Non-weighted</h2>
        <p>Allowing for experimentation and exploration without high stakes.</p>
      </div>
      
      <div id="section-year2" class="year-section">
        <h2 class="year-title">Year 2: 20% weighted</h2>
        <p>Contributes 20% to your final mark, reflecting the adoption of Professional Practice.</p>
      </div>
      
      <div id="section-year3" class="year-section">
        <h2 class="year-title">Year 3: 80% weighted</h2>
        <p>Carries the majority of the weight at 80%, emphasising the importance of your final year work.</p>
      </div>
      
      <!-- Legend -->
      <div class="legend">
        <div class="legend-item">
          <div class="legend-color project-color"></div>
          <span>Project/Activity</span>
        </div>
        <div class="legend-item">
          <div class="legend-color formative-color"></div>
          <span>Formative Feedback</span>
        </div>
        <div class="legend-item">
          <div class="legend-color summative-color"></div>
          <span>Summative Assessment</span>
        </div>
        <div class="legend-item">
          <div class="legend-color break-color"></div>
          <span>Break/Enrichment Week</span>
        </div>
      </div>
      
      <!-- Timeline visualization -->
      <div class="timeline-visualization">
        <div class="teaching-blocks">
          <div class="block-label">Teaching Block 1</div>
          <div class="block-label">Teaching Block 2</div>
          <div class="block-label">Teaching Block 3</div>
        </div>
        
        <div class="week-markers" id="week-markers">
          <!-- Week markers will be generated by JavaScript -->
        </div>
        
        <div class="timeline-content">
          <div class="vertical-columns" id="vertical-columns">
            <!-- Vertical columns for breaks will be generated by JavaScript -->
          </div>
          
          <div class="timeline-items" id="timeline-items">
            <!-- Timeline items will be generated by JavaScript -->
          </div>
        </div>
      </div>
      
      <blockquote>
        "Commitment to practice is the key to progress, and through failure, we often uncover the most valuable lessons that teach us resilience, and gain insights that lead to deeper understanding, growth and mastery. Use this time well."
        <div class="quote-attribution">Staff member or Fashion Designer quote</div>
      </blockquote>
      
      <a href="https://canvas.kingston.ac.uk/courses/32501" class="back-button">Back to Module Home Page</a>
      
      <div class="footer">
        <p>Kingston School of Art - BA (Hons) Fashion Program – Learning Outcomes, Feedback and Assessment KnowledgeBase</p>
        <p>© 2025 Kingston University</p>
      </div>
    </div>
  </div>
  
  <!-- Modal for assessment details -->
  <div class="modal-overlay" id="modal-overlay">
    <div class="modal-content" id="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="modal-title"></h3>
        <button class="close-button" id="modal-close">×</button>
      </div>
      <p id="modal-description"></p>
      <a href="#" class="resource-link" id="modal-link" target="_blank">View Assessment Resources</a>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Timeline data
      const timelineData = {
        year1: {
          title: "Year 1: Non-weighted",
          description: "Allowing for experimentation and exploration without high stakes.",
          weeks: 45,
          items: [
            { id: 'induction', name: 'Induction', start: 1, duration: 2, type: 'project' },
            { id: 'project1', name: 'Project One (FN4004)', start: 3, duration: 9, type: 'project' },
            { id: 'formative1', name: 'Formative Feedback (FN4004)', start: 9, duration: 0, type: 'formative', 
              link: "https://canvas.kingston.ac.uk/courses/32501/pages/placeholder",
              details: "Mid-project feedback session focusing on your initial design concepts and research direction." },
            { id: 'summative1', name: 'Summative Assessment (FN4004)', start: 12, duration: 0, type: 'summative', 
              link: "https://canvas.kingston.ac.uk/courses/32501/pages/placeholder",
              details: "Final assessment of your first project work including research, development, and outcomes." },
            { id: 'project2', name: 'Project Two (FN4004)', start: 12, duration: 10, type: 'project' },
            { id: 'formative2', name: 'Formative Feedback (FN4004)', start: 20, duration: 0, type: 'formative', 
              link: "https://canvas.kingston.ac.uk/courses/32501/pages/placeholder",
              details: "Development feedback for your second project to help refine your direction." },
            { id: 'toile', name: 'Toile Development (FN4005)', start: 26, duration: 8, type: 'project' },
            { id: 'project3', name: 'Project Three (FN4004)', start: 26, duration: 12, type: 'project' },
            { id: 'formative3', name: 'Formative Feedback (FN4005)', start: 32, duration: 0, type: 'formative', 
              link: "https://canvas.kingston.ac.uk/courses/32501/pages/placeholder",
              details: "Technical feedback on your toile development and construction techniques." },
            { id: 'portfolio', name: 'Portfolio Development (FN4005)', start: 34, duration: 4, type: 'project' },
            { id: 'summative2', name: 'Summative Submission (FN4005)', start: 38, duration: 0, type: 'summative', 
              link: "https://canvas.kingston.ac.uk/courses/32501/pages/placeholder",
              details: "Final portfolio assessment including technical work and completed projects." },
            { id: 'historical', name: 'Historical Themes Research (HA4104)', start: 3, duration: 13, type: 'project' },
            { id: 'essayPlanning', name: 'Essay Planning (HA4104)', start: 16, duration: 6, type: 'project' },
            { id: 'essayWriting', name: 'Essay Writing Period (HA4104)', start: 26, duration: 10, type: 'project' },
            { id: 'chsSubmission', name: 'CHS Submission (HA4104)', start: 36, duration: 0, type: 'summative', 
              link: "https://canvas.kingston.ac.uk/courses/32501/pages/placeholder",
              details: "Final submission of your written Cultural & Historical Studies essay." },
          ],
          breaks: [
            { name: 'TB1 Enrichment Week', start: 8, duration: 1 },
            { name: 'Winter Break', start: 22, duration: 4 },
            { name: 'TB2 Enrichment Week', start: 33, duration: 1 },
            { name: 'Summer Break', start: 38, duration: 7 }
          ]
        },
        year2: {
          title: "Year 2: 20% weighted",
          description: "Contributes 20% to your final mark, reflecting the adoption of Professional Practice.",
          weeks: 45,
          items: [
            { id: 'induction2', name: 'Induction', start: 1, duration: 2, type: 'project' },
            { id: 'project1_y2', name: 'Project One (FN5001)', start: 3, duration: 9, type: 'project' },
            { id: 'formative1_y2', name: 'Formative Feedback (FN5001)', start: 9, duration: 0, type: 'formative', 
              link: "https://canvas.kingston.ac.uk/courses/32501/pages/placeholder",
              details: "Mid-project feedback focusing on your design development and concept research." },
            { id: 'summative1_y2', name: 'Project Submission (FN5001)', start: 12, duration: 0, type: 'summative', 
              link: "https://canvas.kingston.ac.uk/courses/32501/pages/placeholder",
              details: "Assessment of your project outcomes, contributing to your 20% Year 2 weighting." },
            { id: 'designTutorials', name: 'Design Process Tutorials (FN5001)', start: 12, duration: 10, type: 'project' },
            { id: 'majorProject1', name: 'Major Project Phase 1 (FN5001)', start: 12, duration: 10, type: 'project' },
            { id: 'formativeReview', name: 'Formative Review (FN5001)', start: 20, duration: 0, type: 'formative', 
              link: "https://canvas.kingston.ac.uk/courses/32501/pages/placeholder",
              details: "Comprehensive review of your work to date with industry feedback." },
            { id: 'productDev', name: 'Product Development (FN5003)', start: 26, duration: 8, type: 'project' },
            { id: 'iconsMuses', name: 'Icons & Muses (FN5001)', start: 26, duration: 12, type: 'project' },
            { id: 'midPoint', name: 'Mid-Point Formative (FN5003)', start: 32, duration: 0, type: 'formative', 
              link: "https://canvas.kingston.ac.uk/courses/32501/pages/placeholder",
              details: "Technical and creative feedback on your product development work." },
            { id: 'portfolioDev_y2', name: 'Portfolio Development (FN5003)', start: 34, duration: 4, type: 'project' },
            { id: 'finalSubmission', name: 'Final Project Submission (FN5003)', start: 38, duration: 0, type: 'summative', 
              link: "https://canvas.kingston.ac.uk/courses/32501/pages/placeholder",
              details: "Final assessment of your Year 2 projects and portfolio." },
            { id: 'historical_y2', name: 'Historical Themes Research (HA5107)', start: 3, duration: 13, type: 'project' },
            { id: 'essayPlanning_y2', name: 'Essay Planning (HA5107)', start: 16, duration: 6, type: 'project' },
            { id: 'essayWriting_y2', name: 'Essay Writing Period (HA5107)', start: 26, duration: 10, type: 'project' },
            { id: 'chsSubmission_y2', name: 'CHS Submission (HA5107)', start: 36, duration: 0, type: 'summative', 
              link: "https://canvas.kingston.ac.uk/courses/32501/pages/placeholder",
              details: "Final submission of your Year 2 Cultural & Historical Studies essay." },
          ],
          breaks: [
            { name: 'TB1 Enrichment Week', start: 8, duration: 1 },
            { name: 'Winter Break', start: 22, duration: 4 },
            { name: 'TB2 Enrichment Week', start: 33, duration: 1 },
            { name: 'Summer Break', start: 38, duration: 7 }
          ]
        },
        year3: {
          title: "Year 3: 80% weighted",
          description: "Carries the majority of the weight at 80%, emphasising the importance of your final year work.",
          weeks: 45,
          items: [
            { id: 'induction3', name: 'Induction', start: 1, duration: 2, type: 'project' },
            { id: 'project1_y3', name: 'Project One (FN6001)', start: 3, duration: 9, type: 'project' },
            { id: 'formative1_y3', name: 'Formative Feedback (FN6001)', start: 9, duration: 0, type: 'formative', 
              link: "https://canvas.kingston.ac.uk/courses/32501/pages/placeholder",
              details: "Critical feedback on your final year project direction and concept development." },
            { id: 'summative1_y3', name: 'Project Submission (FN6001)', start: 12, duration: 0, type: 'summative', 
              link: "https://canvas.kingston.ac.uk/courses/32501/pages/placeholder",
              details: "Assessment of your first final-year project, contributing to your 80% weighting." },
            { id: 'designTutorials_y3', name: 'Design Process Tutorials (FN6001)', start: 12, duration: 10, type: 'project' },
            { id: 'majorProject1_y3', name: 'Major Project Phase 1 (FN6001)', start: 12, duration: 10, type: 'project' },
            { id: 'formativeReview_y3', name: 'Formative Review (FN6001)', start: 20, duration: 0, type: 'formative', 
              link: "https://canvas.kingston.ac.uk/courses/32501/pages/placeholder",
              details: "Industry-facing review of your collection development and professional portfolio." },
            { id: 'productDev_y3', name: 'Product Development (FN6004)', start: 26, duration: 8, type: 'project' },
            { id: 'iconsMuses_y3', name: 'Icons & Muses (FN6004)', start: 26, duration: 12, type: 'project' },
            { id: 'midPoint_y3', name: 'Mid-Point Formative (FN6004)', start: 32, duration: 0, type: 'formative', 
              link: "https://canvas.kingston.ac.uk/courses/32501/pages/placeholder",
              details: "Final development feedback before your summative assessment." },
            { id: 'portfolioDev_y3', name: 'Portfolio Development (FN6004)', start: 34, duration: 4, type: 'project' },
            { id: 'finalSubmission_y3', name: 'Final Project Submission (FN6004)', start: 38, duration: 0, type: 'summative', 
              link: "https://canvas.kingston.ac.uk/courses/32501/pages/placeholder",
              details: "Final major project submission that forms the largest part of your degree classification." },
            { id: 'historical_y3', name: 'Historical Themes Research (HA6101)', start: 3, duration: 13, type: 'project' },
            { id: 'essayPlanning_y3', name: 'Essay Planning (HA6101)', start: 16, duration: 6, type: 'project' },
            { id: 'essayWriting_y3', name: 'Essay Writing Period (HA6101)', start: 26, duration: 10, type: 'project' },
            { id: 'chsSubmission_y3', name: 'CHS Submission (HA6101)', start: 36, duration: 0, type: 'summative', 
              link: "https://canvas.kingston.ac.uk/courses/32501/pages/placeholder",
              details: "Final submission of your Year 3 Cultural & Historical Studies dissertation." },
          ],
          breaks: [
            { name: 'TB1 Enrichment Week', start: 8, duration: 1 },
            { name: 'Winter Break', start: 22, duration: 4 },
            { name: 'TB2 Enrichment Week', start: 33, duration: 1 },
            { name: 'Summer Break', start: 38, duration: 7 }
          ]
        }
      };
      
      // Current active year
      let activeYear = 'year1';
      
      // DOM elements
      const tabYear1 = document.getElementById('tab-year1');
      const tabYear2 = document.getElementById('tab-year2');
      const tabYear3 = document.getElementById('tab-year3');
      const sectionYear1 = document.getElementById('section-year1');
      const sectionYear2 = document.getElementById('section-year2');
      const sectionYear3 = document.getElementById('section-year3');
      const modalOverlay = document.getElementById('modal-overlay');
      const modalContent = document.getElementById('modal-content');
      const modalTitle = document.getElementById('modal-title');
      const modalDescription = document.getElementById('modal-description');
      const modalLink = document.getElementById('modal-link');
      const modalClose = document.getElementById('modal-close');
      const weekMarkers = document.getElementById('week-markers');
      const timelineItems = document.getElementById('timeline-items');
      const verticalColumns = document.getElementById('vertical-columns');
      
      // Set up event listeners for tabs
      tabYear1.addEventListener('click', () => setActiveYear('year1'));
      tabYear2.addEventListener('click', () => setActiveYear('year2'));
      tabYear3.addEventListener('click', () => setActiveYear('year3'));
      
      // Modal close button
      modalClose.addEventListener('click', () => {
        modalOverlay.style.display = 'none';
      });
      
      // Close modal when clicking outside
      modalOverlay.addEventListener('click', (e) => {
        if (e.target === modalOverlay) {
          modalOverlay.style.display = 'none';
        }
      });
      
      // Escape key to close modal
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && modalOverlay.style.display === 'flex') {
          modalOverlay.style.display = 'none';
        }
      });
      
      // Set active year and update UI
      function setActiveYear(year) {
        activeYear = year;
        
        // Update tabs - all with the same gray style when active
        tabYear1.className = 'year-tab' + (year === 'year1' ? ' active' : '');
        tabYear2.className = 'year-tab' + (year === 'year2' ? ' active' : '');
        tabYear3.className = 'year-tab' + (year === 'year3' ? ' active' : '');
        
        // Update sections
        sectionYear1.className = 'year-section' + (year === 'year1' ? ' active' : '');
        sectionYear2.className = 'year-section' + (year === 'year2' ? ' active' : '');
        sectionYear3.className = 'year-section' + (year === 'year3' ? ' active' : '');
        
        // Render timeline for the active year
        renderTimeline();
      }
      
      // Calculate position for timeline items
      function calculatePosition(start, duration, totalWeeks) {
        const leftPosition = (start / totalWeeks) * 100; // As percentage of total width
        const widthPercentage = duration > 0 ? (duration / totalWeeks) * 100 : 2; // Minimum width for milestones
        return {
          left: `${leftPosition}%`,
          width: `${widthPercentage}%`
        };
      }
      
      // Render week markers
      function renderWeekMarkers() {
        weekMarkers.innerHTML = '';
        const totalWeeks = timelineData[activeYear].weeks;
        
        for (let i = 0; i <= totalWeeks; i += 5) {
          const position = (i / totalWeeks) * 100;
          const marker = document.createElement('div');
          marker.className = 'week-marker';
          marker.style.left = `${position}%`;
          
          const line = document.createElement('div');
          line.className = 'week-marker-line';
          
          const label = document.createElement('div');
          label.className = 'week-marker-label';
          label.textContent = `Week ${i}`;
          
          marker.appendChild(line);
          marker.appendChild(label);
          weekMarkers.appendChild(marker);
        }
      }
      
      // Render vertical columns for breaks and enrichment weeks
      function renderVerticalColumns() {
        verticalColumns.innerHTML = '';
        const totalWeeks = timelineData[activeYear].weeks;
        const breaks = timelineData[activeYear].breaks;
        
        breaks.forEach(breakItem => {
          const position = calculatePosition(breakItem.start, breakItem.duration, totalWeeks);
          const column = document.createElement('div');
          column.className = 'vertical-column';
          column.style.left = position.left;
          column.style.width = position.width;
          column.title = breakItem.name;
          
          verticalColumns.appendChild(column);
        });
      }
      
      // Render timeline items
      function renderTimelineItems() {
        timelineItems.innerHTML = '';
        const totalWeeks = timelineData[activeYear].weeks;
        const items = timelineData[activeYear].items;
        
        // Create a row for each item
        for (let i = 0; i < items.length; i++) {
          const item = items[i];
          const position = calculatePosition(item.start, item.duration, totalWeeks);
          
          const row = document.createElement('div');
          row.className = 'timeline-row';
          
          const itemElement = document.createElement('div');
          itemElement.className = `timeline-item ${item.type}`;
          itemElement.style.left = position.left;
          itemElement.style.width = position.width;
          
          // For milestone items (zero duration)
          if (item.duration === 0) {
            // Add click handler for formative and summative assessments
            if (item.type === 'formative' || item.type === 'summative') {
              itemElement.setAttribute('data-id', item.id);
              itemElement.addEventListener('click', function() {
                showModal(item);
              });
              
              // Add label
              const label = document.createElement('div');
              label.className = 'milestone-label';
              label.textContent = item.name;
              label.style.left = position.left;
              row.appendChild(label);
            }
          } else {
            // Add label for regular items
            const label = document.createElement('div');
            label.className = 'item-label';
            label.textContent = item.name;
            itemElement.appendChild(label);
          }
          
          row.appendChild(itemElement);
          timelineItems.appendChild(row);
        }
      }
      
      // Show modal for an item
      function showModal(item) {
        modalTitle.textContent = item.name;
        modalDescription.textContent = item.details;
        modalLink.href = item.link;
        
        // Set the modal type to match the item type
        modalContent.className = 'modal-content ' + item.type;
        
        // Display the modal
        modalOverlay.style.display = 'flex';
      }
      
      // Render the full timeline
      function renderTimeline() {
        renderWeekMarkers();
        renderVerticalColumns();
        renderTimelineItems();
      }
      
      // Initialize the timeline
      setActiveYear('year1');
    });
  </script>
</body>
</html>
